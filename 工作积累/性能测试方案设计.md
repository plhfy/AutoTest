## 性能需求
#### 总体要求
24h内，系统在有10万人的前提下，接入128路混合场景AI设备进行压力测试，验证系统性能

####具体要求
1. 时间要求：24h中分为高峰时段和平峰时段，有3段高峰时段，分别为08-10、12-14、18-20
2. 视频密度要求：高峰时段中，抓拍机的QPS平均为1，网络相机的视频为高密视频（4-6人同屏），面板机的识别QPS为1，警戒相机的QPS平均为4-6；平峰时段中，抓拍机的QPS平均为0.5，网络相机的视频为高密视频（2-4人同屏），面板机的识别QPS为0.5，警戒相机的QPS为2-3
3. 场景要求：场景分为通行场景、安防场景、警戒场景；
    1. 通行场景中包括门禁通行、迎宾通行、考勤
    2. 安防场景包括重点人员、陌生人员、结构化数据、车辆数据
    3. 警戒场景中包括人员及车辆的越界和禁停
    
## 性能分析
难点：
1. 接入路数多，无法直接全部真机接入
2. 时间按照真实场景来限制的，需要分为高峰时段和平峰时段
3. 数据场景多，需要多个场景考虑
4. 相机种类多，同一场景数据可以由多种相机产生

## 方案设计
#### 1. 接入路数的转换
- 该需求主要是验证系统的负载情况，即能处理的数据情况，所以对于相机侧的输入不需要严格的限制，能模拟同等压力的数据输入即可
-各场景接入的相机路数和种类个数是不相同的，但是又给出了各种相机的推图密度，因此，我们可以进行等价换算，将多路数的推图QPS总数计算出来，换算成一路进行推送，达到相同压力即可

#### 2. 视频输入方案
相机种类共有3大类，抓拍机、视频流相机和自身带算力的设备，抓拍机推送出来的是图片流，视频流相机推送出来的是视频流，自身带算力的设备则是设备自身会将所拿到的图片进行分析，最终只需要将结果推送到系统中
- 抓拍相机：计算该场景的抓拍机QPS总和，使用1路抓拍设备，将推图速率设置为总和QPS数量，即达到了接入x路抓拍机的压力
- 视频流相机：视频流相机向系统推送的是视频流，需要系统进行视频的解析及后续的分析操作，所以直接接入等路数的相机，对相机进行灌流即可
- 自身带算力的设备：像面板机、警戒相机、结构化想相机，这些设备会直接将拿到的图片进行分析，将分析结果直接推送给系统，所以系统只有接收数据入库的压力，因此此类设备可以直接调用相机向系统发送数据的接口，对该接口进行数据的推送即可

#### 3. 测试数据的准备
- 对于抓拍机：因为是直接推图，所以需要准备相应的推送图片，根据人员身份的不同，需要准备多张图片，以便生成各身份的数据，目前使用10张图片进行推送
- 对于视频流相机：因为是直接灌流，需要的是不同密度的视频
- 对于自身带算力的设备，可直接写定一记录，压数据传输接口即可






